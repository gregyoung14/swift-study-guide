# Custom UI Components

## Overview
This section provides a comprehensive guide to building custom UI components in iOS, a crucial skill for senior engineers to create unique user experiences and encapsulate reusable UI logic. We will explore techniques for both UIKit and SwiftUI, covering everything from basic drawing to integrating custom controls into your application architecture.

## Table of Contents

- [Introduction to Custom UI Components](#introduction-to-custom-ui-components)
    - [Why Create Custom Components? (Unique UI, Reusability, Brand Identity)](#why-create-custom-components-unique-ui-reusability-brand-identity)
    - [Benefits (Reusability, Brand Identity, Performance, Maintainability)](#benefits-reusability-brand-identity-performance-maintainability)
    - [When to Opt for Custom Components](#when-to-opt-for-custom-components)
- [Custom UI Components in UIKit](#custom-ui-components-in-uikit)
    - [Subclassing `UIView` and `UIControl`](#subclassing-uiview-and-uicontrol)
        - [`init(frame:)` and `init?(coder:)` (Initialization Lifecycle)](#initframe-and-initcoder-initialization-lifecycle)
        - [Common Initialization (e.g., `commonInit()` for both initializers)](#common-initialization-eg-commoninit-for-both-initializers)
        - [`layoutSubviews()` (Layout Cycle)](#layoutsubviews-layout-cycle)
    - [Drawing Custom Content](#drawing-custom-content)
        - [`draw(rect:)` (Core Graphics Drawing)](#drawrect-core-graphics-drawing)
        - [Core Graphics (`CGContext`, `UIBezierPath`)](#core-graphics-cgcontext-uibezierpath)
        - [CALayer and CAShapeLayer (Hardware Accelerated Drawing)](#calayer-and-cashapelayer-hardware-accelerated-drawing)
        - [Image-Based Drawing](#image-based-drawing)
    - [Handling User Interaction](#handling-user-interaction)
        - [Gesture Recognizers (`UIGestureRecognizer` subclasses)](#gesture-recognizers-uigesturerecognizer-subclasses)
        - [Target-Action Pattern (`sendActions(for:)`)](#target-action-pattern-sendactionsfor)
        - [`hitTest()` and `point(inside:with:)` (Responding to Touches)](#hittest-and-pointinsidewith-responding-to-touches)
    - [Styling and Theming (Appearance Proxies, Custom Properties)](#styling-and-theming-appearance-proxies-custom-properties)
    - [Accessibility for Custom Views (`UIAccessibility`, `accessibilityLabel`, `accessibilityHint`)](#accessibility-for-custom-views-uiaccessibility-accessibilitylabel-accessibilityhint)
    - [Customizing `IBDesignable` and `IBInspectable` (Live Rendering in Interface Builder)](#customizing-ibdesignable-and-ibinspectable-live-rendering-in-interface-builder)
        - [Preparing for Interface Builder (e.g., `prepareForInterfaceBuilder()`)](#preparing-for-interface-builder-eg-prepareforinterfacebuilder)
- [Custom UI Components in SwiftUI](#custom-ui-components-in-swiftui)
    - [Composing Views (Building Complex Views from Smaller Ones)](#composing-views-building-complex-views-from-smaller-ones)
        - [Basic View Composition (`VStack`, `HStack`, `ZStack`)](#basic-view-composition-vstack-hstack-zstack)
        - [Creating Reusable View Modifiers (`ViewModifier` Protocol)](#creating-reusable-view-modifiers-viewmodifier-protocol)
        - [Custom Styles (e.g., `ButtonStyle`, `ToggleStyle`)](#custom-styles-eg-buttonstyle-togglestyle)
    - [Custom Shapes and Paths](#custom-shapes-and-paths)
        - [`Shape` Protocol (`func path(in rect: CGRect) -> Path`)](#shape-protocol-func-pathin-rect-cgrect-path)
        - [`Path` in SwiftUI (Drawing Lines, Curves, Shapes)](#path-in-swiftui-drawing-lines-curves-shapes)
    - [Drawing with `Canvas` (Advanced Custom Drawing)](#drawing-with-canvas-advanced-custom-drawing)
    - [Integrating UIKit Views into SwiftUI](#integrating-uikit-views-into-swiftui)
        - [`UIViewRepresentable` (Bridging UIKit Views)](#uiviewrepresentable-bridging-uikit-views)
        - [`UIViewControllerRepresentable` (Bridging UIKit View Controllers)](#uiviewcontrollerrepresentable-bridging-uikit-view-controllers)
        - [Updating and Coordinating Views (Coordinator Pattern)](#updating-and-coordinating-views-coordinator-pattern)
    - [Handling User Input in SwiftUI](#handling-user-input-in-swiftui)
        - [Gestures (Tap, LongPress, Drag, Rotation, Magnification)](#gestures-tap-longpress-drag-rotation-magnification)
        - [Custom Controls with `Binding` and `ControlProperty`](#custom-controls-with-binding-and-controlproperty)
    - [Environment Values and Preferences (Sharing Data Across View Hierarchy)](#environment-values-and-preferences-sharing-data-across-view-hierarchy)
- [Design Systems and Component Libraries](#design-systems-and-component-libraries)
    - [Benefits of a Design System (Consistency, Efficiency, Scalability)](#benefits-of-a-design-system-consistency-efficiency-scalability)
    - [Building a Reusable Component Library](#building-a-reusable-component-library)
    - [Tokens (Colors, Typography, Spacing)](#tokens-colors-typography-spacing)
- [Testing Custom UI Components](#testing-custom-ui-components)
    - [Unit Testing UI Logic (ViewModel Testing)](#unit-testing-ui-logic-viewmodel-testing)
    - [Snapshot Testing (`FBSnapshotTestCase`, `SnapshotTesting`)](#snapshot-testing-fbsnapshottestcase-snapshottesting)
    - [UI Testing for Interactions (XCUITest)](#ui-testing-for-interactions-xcuitest)
    - [SwiftUI Previews for Visual Testing](#swiftui-previews-for-visual-testing)
- [Performance Considerations](#performance-considerations)
    - [Optimizing Drawing and Layout (Offscreen Rendering, Layer Backing)](#optimizing-drawing-and-layout-offscreen-rendering-layer-backing)
    - [Reusing Views (e.g., `UITableViewCell`, `UICollectionViewCell`)](#reusing-views-eg-uitableviewcell-uicollectionviewcell)
    - [Minimizing View Hierarchy Complexity](#minimizing-view-hierarchy-complexity)
    - [Profiling UI Performance with Instruments](#profiling-ui-performance-with-instruments)
